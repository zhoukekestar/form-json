<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Input-Syntax Demo</title>
    <script src='../src/form-json.js'></script>
    <style media="screen">
      textarea {
        height: 200px;
        width: 100%;
      }
      label {
        display: block;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <h2>AJAX data:</h2>
    <textarea>empty</textarea>
    <h3>a</h3>
    <form enctype="application/form-json">
      <label>
        a
        <input name='a' value="a">
      </label>
      <input type='submit' />
    </form>
    <h3>a.</h3>
    <form enctype="application/form-json">
      <label>
        a.
        <input name='a.' value="a.">
      </label>
      <input type='submit' />
    </form>
    <h3>a.b</h3>
    <form enctype="application/form-json">
      <label>
        a.b
        <input name='a.b' value="a.b">
      </label>
      <input type='submit' />
    </form>
    <h3>a.NUMBER.b</h3>
    <form enctype="application/form-json">
      <label>
        a.1.a
        <input name='a.1.a' value="a.1.a">
      </label>
      <label>
        a.6.a
        <input name='a.6.a' value="a.6.a">
      </label>
      <label>
        a.6.b
        <input name='a.6.b' value="a.6.b">
      </label>
      <input type='submit' />
    </form>

    <script>
      document.body.addEventListener('submit', function (e) {
        e.target.beforeStringify = function (d) {
          document.querySelector('textarea').value = JSON.stringify(d, null, 2);
          return d;
        }
      })
    </script>
  </body>
</html>
